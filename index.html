<!DOCTYPE html>
<html lang="ar" dir="rtl" prefix="og: https://ogp.me/ns#">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>Ù…ØªØ¬Ø± Ø£Ù…ÙŠÙ† Ø§Ù„Ø²ÙˆØ§Ø­ÙŠ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ - Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</title>
    <meta name="title" content="Ù…ØªØ¬Ø± Ø£Ù…ÙŠÙ† Ø§Ù„Ø²ÙˆØ§Ø­ÙŠ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ - Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±">
    <meta name="description" content="ØªØ³ÙˆÙ‚ Ø¨Ø°ÙƒØ§Ø¡ØŒ Ø¹ÙŠØ´ Ø¨Ø±Ø§Ø­Ø©. Ø§ÙƒØªØ´Ù Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙÙŠ Ù…ØªØ¬Ø± Ø£Ù…ÙŠÙ† Ø§Ù„Ø²ÙˆØ§Ø­ÙŠ. Ù†Ù‚Ø¯Ù… Ù„Ùƒ ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ ÙØ±ÙŠØ¯Ø© ÙˆØ¢Ù…Ù†Ø©.">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourusername.github.io">
    <meta property="og:title" content="Ù…ØªØ¬Ø± Ø£Ù…ÙŠÙ† Ø§Ù„Ø²ÙˆØ§Ø­ÙŠ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ - Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±">
    <meta property="og:description" content="ØªØ³ÙˆÙ‚ Ø¨Ø°ÙƒØ§Ø¡ØŒ Ø¹ÙŠØ´ Ø¨Ø±Ø§Ø­Ø©. Ø§ÙƒØªØ´Ù Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙÙŠ Ù…ØªØ¬Ø± Ø£Ù…ÙŠÙ† Ø§Ù„Ø²ÙˆØ§Ø­ÙŠ. Ù†Ù‚Ø¯Ù… Ù„Ùƒ ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ ÙØ±ÙŠØ¯Ø© ÙˆØ¢Ù…Ù†Ø©.">
    <meta property="og:image" content="https://i.ibb.co/9jnPYCb/IMG-20251101-WA0015.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="ar_SA">
    <meta property="og:site_name" content="Ù…ØªØ¬Ø± Ø£Ù…ÙŠÙ† Ø§Ù„Ø²ÙˆØ§Ø­ÙŠ">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://yourusername.github.io">
    <meta property="twitter:title" content="Ù…ØªØ¬Ø± Ø£Ù…ÙŠÙ† Ø§Ù„Ø²ÙˆØ§Ø­ÙŠ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ - Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±">
    <meta property="twitter:description" content="ØªØ³ÙˆÙ‚ Ø¨Ø°ÙƒØ§Ø¡ØŒ Ø¹ÙŠØ´ Ø¨Ø±Ø§Ø­Ø©. Ø§ÙƒØªØ´Ù Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙÙŠ Ù…ØªØ¬Ø± Ø£Ù…ÙŠÙ† Ø§Ù„Ø²ÙˆØ§Ø­ÙŠ. Ù†Ù‚Ø¯Ù… Ù„Ùƒ ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ ÙØ±ÙŠØ¯Ø© ÙˆØ¢Ù…Ù†Ø©.">
    <meta property="twitter:image" content="https://i.ibb.co/9jnPYCb/IMG-20251101-WA0015.jpg">
    
    <!-- Additional Meta Tags -->
    <meta name="robots" content="index, follow">
    <meta name="author" content="Ù…ØªØ¬Ø± Ø£Ù…ÙŠÙ† Ø§Ù„Ø²ÙˆØ§Ø­ÙŠ">
    <meta name="keywords" content="Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ, ØªØ³ÙˆÙ‚, Ù…Ù†ØªØ¬Ø§Øª, Ø¹Ø±ÙˆØ¶, Ø£Ù…ÙŠÙ† Ø§Ù„Ø²ÙˆØ§Ø­ÙŠ, ØªØ³ÙˆÙ‚ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-storage-compat.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: #f9f9f9; color: #333; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        #splashScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
        }
        .splash-content {
            text-align: center;
            animation: fadeIn 1.5s ease-in-out;
        }
        .splash-logo {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: bounce 2s infinite, rotate 3s linear infinite;
        }
        .splash-name {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }
        .splash-subtitle {
            font-size: 1.5rem;
            opacity: 0.9;
            animation: slideUp 1.5s ease-out;
        }
        .floating-elements {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .floating-element {
            position: absolute;
            font-size: 2rem;
            opacity: 0.3;
            animation: float 6s ease-in-out infinite;
        }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„/Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #authScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9998;
            color: white;
        }
        
        .auth-container {
            width: 90%;
            max-width: 400px;
        }
        
        .auth-tabs {
            display: flex;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px 15px 0 0;
            overflow: hidden;
        }
        
        .auth-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: none;
            color: white;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .auth-tab.active {
            background: rgba(255,255,255,0.2);
            font-weight: bold;
        }
        
        .auth-form {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 0 0 15px 15px;
            text-align: center;
        }
        
        .auth-form h2 {
            margin-bottom: 20px;
            color: white;
        }
        
        .auth-form input {
            width: 100%;
            padding: 12px 15px;
            margin: 10px 0;
            border: none;
            border-radius: 25px;
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .auth-form input:focus {
            background: rgba(255,255,255,0.3);
            outline: none;
            transform: scale(1.02);
        }
        
        .auth-form input::placeholder {
            color: rgba(255,255,255,0.7);
        }
        
        .auth-btn {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: none;
            border-radius: 25px;
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .auth-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .google-btn {
            background: #4285F4;
        }
        
        .email-btn {
            background: #EA4335;
        }
        
        .divider {
            display: flex;
            align-items: center;
            margin: 20px 0;
            color: rgba(255,255,255,0.7);
        }
        
        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid rgba(255,255,255,0.3);
        }
        
        .divider span {
            padding: 0 15px;
        }
        
        .auth-link {
            color: white;
            margin-top: 15px;
            display: block;
            text-decoration: underline;
            cursor: pointer;
        }
        
        .auth-error {
            background: rgba(220, 53, 69, 0.3);
            color: white;
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            font-size: 14px;
            display: none;
        }
        
        /* Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ */
        #emailVerificationAlert {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #ffc107;
            color: #333;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 10000;
            display: none;
            align-items: center;
            gap: 15px;
        }
        
        .verification-icon {
            font-size: 24px;
        }
        
        /* Ø¨Ù‚ÙŠØ© Ø§Ù„Ø£Ù†Ù…Ø§Ø· ÙƒÙ…Ø§ Ù‡ÙŠ... */
        /* (Ø§Ø­ØªÙØ¸ Ø¨ÙƒÙ„ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù„Ù„Ù…ØªØ¬Ø±) */
        
        /* ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            position: relative;
        }
        
        .profile-img {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .profile-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .user-name {
            font-weight: 500;
            color: white;
        }
        
        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ */
        .profile-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            padding: 15px;
            min-width: 250px;
            z-index: 1000;
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .profile-dropdown.show { display: block; }
        
        .profile-dropdown .user-info {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            text-align: center;
        }
        
        .profile-dropdown .user-name {
            font-weight: bold;
            color: #333;
        }
        
        .profile-dropdown .user-email {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        .profile-dropdown .user-status {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 10px;
            display: inline-block;
            margin-top: 5px;
        }
        
        .status-verified {
            background: #d4edda;
            color: #155724;
        }
        
        .status-unverified {
            background: #fff3cd;
            color: #856404;
        }
        
        .profile-dropdown .dropdown-item {
            padding: 10px 0;
            cursor: pointer;
            transition: color 0.3s;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .profile-dropdown .dropdown-item:hover {
            color: #6a11cb;
        }
        
        /* Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØµÙØ­Ø© */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            z-index: 10000;
            animation: slideInRight 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .toast-success {
            background: #28a745;
        }
        
        .toast-error {
            background: #dc3545;
        }
        
        .toast-warning {
            background: #ffc107;
            color: #333;
        }
        
        .toast-info {
            background: #17a2b8;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Ø¨Ù‚ÙŠØ© Ø§Ù„Ø£Ù†Ù…Ø§Ø· ÙƒÙ…Ø§ Ù‡ÙŠ... */
        /* (Ø§Ø­ØªÙØ¸ Ø¨ÙƒÙ„ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù„Ù„Ù…ØªØ¬Ø±) */
        
    </style>
</head>
<body>
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
    <div id="splashScreen">
        <div class="floating-elements">
            <div class="floating-element" style="top: 10%; left: 10%;">ğŸ›’</div>
            <div class="floating-element" style="top: 20%; right: 15%;">ğŸ“±</div>
            <div class="floating-element" style="bottom: 30%; left: 20%;">ğŸ’»</div>
            <div class="floating-element" style="bottom: 15%; right: 10%;">ğŸ‘•</div>
            <div class="floating-element" style="top: 40%; left: 5%;">âš½</div>
            <div class="floating-element" style="top: 60%; right: 5%;">ğŸ’„</div>
        </div>
        <div class="splash-content">
            <div class="splash-logo">ğŸ›ï¸</div>
            <div class="splash-name">Ø£Ù…ÙŠÙ† Ø§Ù„Ø²ÙˆØ§Ø­ÙŠ</div>
            <div class="splash-subtitle">Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ù…ØªÙ…ÙŠØ²</div>
        </div>
    </div>
    
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© -->
    <div id="authScreen">
        <div class="auth-container">
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                <button class="auth-tab" data-tab="register">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
            </div>
            
            <!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
            <div class="auth-form" id="loginForm">
                <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ</h2>
                <div class="auth-error" id="loginError"></div>
                
                <input type="email" id="loginEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
                <input type="password" id="loginPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                
                <button class="auth-btn email-btn" id="loginWithEmail">
                    <span>ğŸ“§</span>
                    <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯</span>
                </button>
                
                <div class="divider">
                    <span>Ø£Ùˆ</span>
                </div>
                
                <button class="auth-btn google-btn" id="loginWithGoogle">
                    <span>G</span>
                    <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Ø¬ÙˆØ¬Ù„</span>
                </button>
                
                <span class="auth-link" id="forgotPassword">Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ</span>
                <span class="auth-link" id="switchToRegister">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†</span>
            </div>
            
            <!-- Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ -->
            <div class="auth-form" id="registerForm" style="display: none;">
                <h2>Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¢Ù†</h2>
                <div class="auth-error" id="registerError"></div>
                
                <input type="text" id="registerName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
                <input type="email" id="registerEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
                <input type="password" id="registerPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)" required>
                <input type="tel" id="registerPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required>
                
                <button class="auth-btn email-btn" id="registerWithEmail">
                    <span>ğŸ“</span>
                    <span>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯</span>
                </button>
                
                <div class="divider">
                    <span>Ø£Ùˆ</span>
                </div>
                
                <button class="auth-btn google-btn" id="registerWithGoogle">
                    <span>G</span>
                    <span>Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ø­Ø³Ø§Ø¨ Ø¬ÙˆØ¬Ù„</span>
                </button>
                
                <span class="auth-link" id="switchToLogin">Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
            </div>
            
            <!-- Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
            <div class="auth-form" id="resetForm" style="display: none;">
                <h2>Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h2>
                <div class="auth-error" id="resetError"></div>
                
                <input type="email" id="resetEmail" placeholder="Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
                
                <button class="auth-btn email-btn" id="sendResetEmail">
                    <span>â†»</span>
                    <span>Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ¹ÙŠÙŠÙ†</span>
                </button>
                
                <span class="auth-link" id="backToLogin">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
            </div>
        </div>
    </div>
    
    <!-- Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ -->
    <div id="emailVerificationAlert">
        <div class="verification-icon">ğŸ“§</div>
        <div>
            <strong>ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</strong>
            <p>Ù„Ù‚Ø¯ Ø£Ø±Ø³Ù„Ù†Ø§ Ø±Ø§Ø¨Ø· ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù„ØªØªÙ…ÙƒÙ† Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª.</p>
        </div>
        <button class="btn" id="resendVerification" style="background: #6a11cb; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</button>
    </div>
    
    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div id="mainContent" style="display: none;">
        <!-- Ø¨Ø§Ù‚ÙŠ ÙƒÙˆØ¯ Ø§Ù„Ù…ØªØ¬Ø± ÙƒÙ…Ø§ Ù‡Ùˆ... -->
        <!-- (Ø§Ø­ØªÙØ¸ Ø¨ÙƒÙ„ ÙƒÙˆØ¯ Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø£ØµÙ„ÙŠ Ù‡Ù†Ø§) -->
        
        <!-- ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‡ÙŠØ¯Ø± Ù„ÙŠØ¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
        <header>
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <h1>Ù…ØªØ¬Ø± Ø£Ù…ÙŠÙ† Ø§Ù„Ø²ÙˆØ§Ø­ÙŠ</h1>
                        <p>Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</p>
                    </div>
                    <div class="user-profile" id="userProfile">
                        <div class="profile-img" id="userProfileImg">
                            <span id="profileInitials">ğŸ‘¤</span>
                        </div>
                        <span class="user-name" id="userDisplayName">Ù…Ø³ØªØ®Ø¯Ù…</span>
                        <div class="profile-dropdown" id="profileDropdown">
                            <div class="user-info">
                                <div class="user-name" id="dropdownUserName">Ù…Ø³ØªØ®Ø¯Ù…</div>
                                <div class="user-email" id="dropdownUserEmail">email@example.com</div>
                                <div class="user-status" id="dropdownUserStatus">ØºÙŠØ± Ù…ÙØ¹Ù„</div>
                            </div>
                            <div class="dropdown-item" id="viewOrders">
                                <span>ğŸ“‹</span>
                                <span>Ø·Ù„Ø¨Ø§ØªÙŠ</span>
                            </div>
                            <div class="dropdown-item" id="viewProfile">
                                <span>ğŸ‘¤</span>
                                <span>Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ</span>
                            </div>
                            <div class="dropdown-item" id="verifyEmail" style="display: none;">
                                <span>âœ…</span>
                                <span>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨</span>
                            </div>
                            <div class="dropdown-item" id="logoutBtn">
                                <span>ğŸšª</span>
                                <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
                            </div>
                        </div>
                    </div>
                    <div class="search-cart">
                        <div class="search-box">
                            <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...">
                            <button>ğŸ”</button>
                        </div>
                        <div class="header-icons">
                            <div class="orders-icon" id="ordersIcon">
                                ğŸ“‹
                                <span class="orders-count">0</span>
                            </div>
                            <div class="cart-icon" id="cartIcon">
                                ğŸ›’
                                <span class="cart-count">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Ø¨Ø§Ù‚ÙŠ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ØªØ¬Ø±... -->
        <!-- (Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ ØªÙ…Ø§Ù…Ø§Ù‹) -->
        
    </div>

    <script>
        // âœ… ØªÙ‡ÙŠØ¦Ø© Firebase Ù…Ø¹ Authentication
        const firebaseConfig = {
            apiKey: "AIzaSyA0KMF-nZh5Y5DsHt9MWCfTLmyMDnWSAFc",
            authDomain: "temo2-2e66e.firebaseapp.com",
            projectId: "temo2-2e66e",
            storageBucket: "temo2-2e66e.firebasestorage.app",
            messagingSenderId: "723626918363",
            appId: "1:723626918363:web:9cb4a2c4aeb9297dbce7fe",
            measurementId: "G-4N04DMBMTP"
        };

        // ØªÙ‡ÙŠØ¦Ø© Firebase
        try {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
        } catch (error) {
            console.error('Error initializing Firebase:', error);
        }
        
        const db = firebase.firestore();
        const auth = firebase.auth();
        const storage = firebase.storage();
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø©
        let products = [];
        let cart = JSON.parse(localStorage.getItem('aminCart')) || [];
        let currentUser = null;
        let userProfile = null;

        // â­ Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
        setTimeout(() => {
            document.getElementById('splashScreen').style.display = 'none';
            checkAuthState();
        }, 3000);

        // â­ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
        function checkAuthState() {
            auth.onAuthStateChanged(async (user) => {
                if (user) {
                    // âœ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„
                    currentUser = user;
                    
                    // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
                    if (!user.emailVerified) {
                        showEmailVerificationAlert();
                    }
                    
                    // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Firestore
                    await loadUserProfile(user.uid);
                    
                    // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…ØªØ¬Ø±
                    document.getElementById('authScreen').style.display = 'none';
                    document.getElementById('mainContent').style.display = 'block';
                    
                    // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    updateUserDisplay();
                    
                    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                    loadProducts();
                    
                    // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨
                    showToast(`Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ ${user.displayName || 'Ø¹Ø²ÙŠØ²ÙŠ Ø§Ù„Ø¹Ù…ÙŠÙ„'}!`, 'success');
                    
                } else {
                    // âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„
                    document.getElementById('authScreen').style.display = 'flex';
                    document.getElementById('mainContent').style.display = 'none';
                }
            });
        }

        // â­ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Firestore
        async function loadUserProfile(userId) {
            try {
                const userDoc = await db.collection('users').doc(userId).get();
                
                if (userDoc.exists) {
                    userProfile = userDoc.data();
                } else {
                    // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù„Ù‡ Ù…Ù„ÙØŒ Ù†Ù†Ø´Ø¦ ÙˆØ§Ø­Ø¯
                    const newUserData = {
                        uid: userId,
                        email: currentUser.email,
                        displayName: currentUser.displayName || 'Ù…Ø³ØªØ®Ø¯Ù…',
                        phone: '',
                        address: '',
                        country: '',
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                        emailVerified: currentUser.emailVerified,
                        photoURL: currentUser.photoURL || '',
                        ordersCount: 0,
                        totalSpent: 0
                    };
                    
                    await db.collection('users').doc(userId).set(newUserData);
                    userProfile = newUserData;
                }
                
            } catch (error) {
                console.error('Error loading user profile:', error);
            }
        }

        // â­ ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Firestore
        async function updateUserProfile(updates) {
            try {
                if (!currentUser) return;
                
                await db.collection('users').doc(currentUser.uid).update({
                    ...updates,
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                userProfile = { ...userProfile, ...updates };
                updateUserDisplay();
                
            } catch (error) {
                console.error('Error updating user profile:', error);
            }
        }

        // â­ ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        function updateUserDisplay() {
            if (!currentUser) return;
            
            const displayName = currentUser.displayName || 'Ù…Ø³ØªØ®Ø¯Ù…';
            const email = currentUser.email;
            const isVerified = currentUser.emailVerified;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‡ÙŠØ¯Ø±
            document.getElementById('userDisplayName').textContent = displayName;
            document.getElementById('dropdownUserName').textContent = displayName;
            document.getElementById('dropdownUserEmail').textContent = email;
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚
            const statusElement = document.getElementById('dropdownUserStatus');
            if (isVerified) {
                statusElement.textContent = 'Ù…ÙØ¹Ù„';
                statusElement.className = 'user-status status-verified';
                document.getElementById('verifyEmail').style.display = 'none';
                document.getElementById('emailVerificationAlert').style.display = 'none';
            } else {
                statusElement.textContent = 'ØºÙŠØ± Ù…ÙØ¹Ù„';
                statusElement.className = 'user-status status-unverified';
                document.getElementById('verifyEmail').style.display = 'block';
                showEmailVerificationAlert();
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©
            const profileImg = document.getElementById('userProfileImg');
            const profileInitials = document.getElementById('profileInitials');
            
            if (currentUser.photoURL) {
                profileImg.innerHTML = `<img src="${currentUser.photoURL}" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù„Ù">`;
            } else {
                // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù…Ù† Ø§Ù„Ø§Ø³Ù…
                const initials = displayName.split(' ').map(n => n[0]).join('').toUpperCase();
                profileInitials.textContent = initials || 'ğŸ‘¤';
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù…Ù† userProfile
            if (userProfile) {
                if (userProfile.phone) {
                    document.getElementById('registerPhone').value = userProfile.phone;
                }
            }
        }

        // â­ Ø¹Ø±Ø¶ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯
        function showEmailVerificationAlert() {
            if (currentUser && !currentUser.emailVerified) {
                document.getElementById('emailVerificationAlert').style.display = 'flex';
            }
        }

        // â­ Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚
        document.getElementById('resendVerification').addEventListener('click', async () => {
            try {
                await currentUser.sendEmailVerification();
                showToast('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ', 'success');
            } catch (error) {
                showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚', 'error');
                console.error('Error sending verification:', error);
            }
        });

        // â­ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ÙÙŠ Ø´Ø§Ø´Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
        document.querySelectorAll('.auth-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©
                document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('registerForm').style.display = 'none';
                document.getElementById('resetForm').style.display = 'none';
                
                if (tabId === 'login') {
                    document.getElementById('loginForm').style.display = 'block';
                } else if (tabId === 'register') {
                    document.getElementById('registerForm').style.display = 'block';
                }
                
                // Ø¥Ø®ÙØ§Ø¡ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£
                hideAllErrors();
            });
        });

        // â­ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙÙŠ Ø´Ø§Ø´Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
        document.getElementById('switchToRegister').addEventListener('click', () => {
            document.querySelector('[data-tab="register"]').click();
        });
        
        document.getElementById('switchToLogin').addEventListener('click', () => {
            document.querySelector('[data-tab="login"]').click();
        });
        
        document.getElementById('forgotPassword').addEventListener('click', () => {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('resetForm').style.display = 'block';
            hideAllErrors();
        });
        
        document.getElementById('backToLogin').addEventListener('click', () => {
            document.getElementById('resetForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
            hideAllErrors();
        });

        // â­ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
        document.getElementById('loginWithEmail').addEventListener('click', async () => {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const errorElement = document.getElementById('loginError');
            
            if (!email || !password) {
                showError('loginError', 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                return;
            }
            
            try {
                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                showToast('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                
            } catch (error) {
                let errorMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
                
                switch(error.code) {
                    case 'auth/user-not-found':
                        errorMessage = 'Ø§Ù„Ø­Ø³Ø§Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯';
                        break;
                    case 'auth/wrong-password':
                        errorMessage = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­';
                        break;
                    case 'auth/user-disabled':
                        errorMessage = 'ØªÙ… ØªØ¹Ø·ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨';
                        break;
                }
                
                showError('loginError', errorMessage);
            }
        });

        // â­ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
        document.getElementById('registerWithEmail').addEventListener('click', async () => {
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const phone = document.getElementById('registerPhone').value.trim();
            const errorElement = document.getElementById('registerError');
            
            if (!name || !email || !password || !phone) {
                showError('registerError', 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                return;
            }
            
            if (password.length < 6) {
                showError('registerError', 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                return;
            }
            
            try {
                // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ ÙÙŠ Firebase Authentication
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                // 2. ØªØ­Ø¯ÙŠØ« Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                await user.updateProfile({
                    displayName: name
                });
                
                // 3. Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· ØªØ­Ù‚Ù‚ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
                await user.sendEmailVerification({
                    url: window.location.href,
                    handleCodeInApp: true
                });
                
                // 4. Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Firestore
                const userData = {
                    uid: user.uid,
                    email: email,
                    displayName: name,
                    phone: phone,
                    address: '',
                    country: '',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                    emailVerified: false,
                    photoURL: '',
                    ordersCount: 0,
                    totalSpent: 0
                };
                
                await db.collection('users').doc(user.uid).set(userData);
                
                // 5. Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
                showToast('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ', 'success');
                
                // 6. ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
                updateUserDisplay();
                
            } catch (error) {
                let errorMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨';
                
                switch(error.code) {
                    case 'auth/email-already-in-use':
                        errorMessage = 'Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­';
                        break;
                    case 'auth/weak-password':
                        errorMessage = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ© Ø¬Ø¯Ø§Ù‹';
                        break;
                    case 'auth/network-request-failed':
                        errorMessage = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø´Ø¨ÙƒØ©';
                        break;
                }
                
                showError('registerError', errorMessage);
            }
        });

        // â­ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Ø¬ÙˆØ¬Ù„
        document.getElementById('loginWithGoogle').addEventListener('click', signInWithGoogle);
        document.getElementById('registerWithGoogle').addEventListener('click', signInWithGoogle);
        
        async function signInWithGoogle() {
            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                provider.setCustomParameters({
                    prompt: 'select_account'
                });
                
                const result = await auth.signInWithPopup(provider);
                const user = result.user;
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const userDoc = await db.collection('users').doc(user.uid).get();
                
                if (!userDoc.exists) {
                    // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    const userData = {
                        uid: user.uid,
                        email: user.email,
                        displayName: user.displayName,
                        phone: '',
                        address: '',
                        country: '',
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                        emailVerified: user.emailVerified,
                        photoURL: user.photoURL || '',
                        ordersCount: 0,
                        totalSpent: 0,
                        provider: 'google'
                    };
                    
                    await db.collection('users').doc(user.uid).set(userData);
                }
                
                showToast('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Ø¬ÙˆØ¬Ù„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                
            } catch (error) {
                let errorMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¬ÙˆØ¬Ù„';
                
                switch(error.code) {
                    case 'auth/popup-closed-by-user':
                        errorMessage = 'ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„';
                        break;
                    case 'auth/cancelled-popup-request':
                        errorMessage = 'ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ³Ø¬ÙŠÙ„';
                        break;
                    case 'auth/popup-blocked':
                        errorMessage = 'ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©';
                        break;
                }
                
                showToast(errorMessage, 'error');
            }
        }

        // â­ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
        document.getElementById('sendResetEmail').addEventListener('click', async () => {
            const email = document.getElementById('resetEmail').value.trim();
            const errorElement = document.getElementById('resetError');
            
            if (!email) {
                showError('resetError', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ');
                return;
            }
            
            try {
                await auth.sendPasswordResetEmail(email);
                showToast('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ', 'success');
                document.getElementById('backToLogin').click();
                
            } catch (error) {
                let errorMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ¹ÙŠÙŠÙ†';
                
                switch(error.code) {
                    case 'auth/user-not-found':
                        errorMessage = 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨ Ù…Ø±ØªØ¨Ø· Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­';
                        break;
                }
                
                showError('resetError', errorMessage);
            }
        });

        // â­ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        document.getElementById('verifyEmail').addEventListener('click', async () => {
            try {
                await currentUser.sendEmailVerification();
                showToast('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ', 'success');
            } catch (error) {
                showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚', 'error');
            }
        });

        // â­ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
        document.getElementById('viewProfile').addEventListener('click', () => {
            // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„Ø¹Ø±Ø¶ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
            alert('Ù‚Ø±ÙŠØ¨Ø§Ù‹: ØµÙØ­Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ');
        });

        // â­ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        document.getElementById('logoutBtn').addEventListener('click', async () => {
            try {
                await auth.signOut();
                showToast('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                // Ø³ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© onAuthStateChanged
            } catch (error) {
                showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬', 'error');
            }
        });

        // â­ Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
        document.getElementById('userProfile').addEventListener('click', function(e) {
            e.stopPropagation();
            document.getElementById('profileDropdown').classList.toggle('show');
        });

        document.addEventListener('click', function() {
            document.getElementById('profileDropdown').classList.remove('show');
        });

        // â­ Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.style.display = 'block';
        }
        
        function hideAllErrors() {
            document.querySelectorAll('.auth-error').forEach(el => {
                el.style.display = 'none';
            });
        }
        
        function showToast(message, type = 'info') {
            // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø³Ø§Ø¨Ù‚Ø©
            document.querySelectorAll('.toast').forEach(el => el.remove());
            
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <span>${type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : type === 'warning' ? 'âš ï¸' : 'â„¹ï¸'}</span>
                <span>${message}</span>
            `;
            
            document.body.appendChild(toast);
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, 5000);
        }

        // â­ ØªØ­Ø¯ÙŠØ« Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨ Ù„ØªØ±ØªØ¨Ø· Ø¨Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        async function createOrder(orderData) {
            if (!currentUser) {
                showToast('ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return null;
            }
            
            try {
                // Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨
                const completeOrderData = {
                    ...orderData,
                    userId: currentUser.uid,
                    userEmail: currentUser.email,
                    userName: currentUser.displayName || userProfile?.displayName || 'Ù…Ø³ØªØ®Ø¯Ù…',
                    userPhone: userProfile?.phone || '',
                    userAddress: userProfile?.address || '',
                    userCountry: userProfile?.country || '',
                    status: 'pending',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                };
                
                // Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Firestore
                const orderRef = await db.collection('orders').add(completeOrderData);
                
                // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                await db.collection('users').doc(currentUser.uid).update({
                    ordersCount: firebase.firestore.FieldValue.increment(1),
                    totalSpent: firebase.firestore.FieldValue.increment(orderData.total),
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                // Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©
                await db.collection('notifications').add({
                    title: 'Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯',
                    message: `Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† ${completeOrderData.userName} Ø¨Ù‚ÙŠÙ…Ø© ${orderData.total.toFixed(2)} Ø±.Ø³`,
                    type: 'success',
                    read: false,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                showToast('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                return orderRef.id;
                
            } catch (error) {
                console.error('Error creating order:', error);
                showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨', 'error');
                return null;
            }
        }

        // â­ ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù„ØªØ±ØªØ¨Ø· Ø¨Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        async function loadUserOrders() {
            if (!currentUser) {
                showToast('ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª', 'error');
                return;
            }
            
            try {
                const querySnapshot = await db.collection('orders')
                    .where('userId', '==', currentUser.uid)
                    .orderBy('createdAt', 'desc')
                    .get();
                
                // ... Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ
                
            } catch (error) {
                console.error('Error loading orders:', error);
            }
        }

        // â­ Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø¨Ø§Ù‚ÙŠ Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ØªØ¬Ø± (Ù…Ø¹ ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø·ÙÙŠÙØ©)
        // loadProducts, addToCart, updateCartDisplay, Ø¥Ù„Ø®...
        // ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ Ù…Ø¹ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† currentUser Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©

        // â­ Ø¹Ù†Ø¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙŠ Firebase
        auth.onIdTokenChanged(async (user) => {
            if (user) {
                // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
                updateUserDisplay();
                
                // ØªØ­Ø¯ÙŠØ« ÙÙŠ Firestore
                await db.collection('users').doc(user.uid).update({
                    emailVerified: user.emailVerified,
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                if (user.emailVerified) {
                    showToast('ØªÙ… ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                }
            }
        });

        // â­ Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ØªØ¬Ø±
        window.onload = function() {
            // Ø³ÙŠØªÙ… ØªÙØ¹ÙŠÙ„ checkAuthState ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        };

        // â­ Ø¨Ø§Ù‚ÙŠ Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø£ØµÙ„ÙŠØ©...
        // (Ø£Ø¶Ù Ù‡Ù†Ø§ ÙƒÙ„ Ø¯ÙˆØ§Ù„Ùƒ Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù…Ø¹ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† currentUser Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©)

    </script>
</body>
</html>
